# Demo configuration for the Thavyra API gateway

consumers:
  - name: apikey
    key: apikey
    
  - name: secondkey
    key: apikey2
  
services:
  
  - name: api
    url: http://api
    routes:
      - name: api
        match:
          path: /api
        transforms:
          path:
            set: /
    authorization:
      consumers: [apikey, secondkey]

  - name: accounts
    url: http://accounts
    routes:
      - name: accounts
        match:
          path: /accounts
    
  - name: developer-portal
    url: http://developer
    routes:
      - name: developer-portal
        match:
          path: /developer
    authorization:
      consumers: [apikey]
          
  - name: transforms
    routes:
      - name: transforms
        match:
          path: /api/{plugin}/stuff/{**remainder}
          
        transforms:
          path:
            set: /newpath
          headers:
            - name: MyHeader
              set: MyValue
            - remove: MyHeader2